{"version":3,"file":"aurelia-templating-resources.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/compose.ts","../../src/if-core.ts","../../src/if.ts","../../src/else.ts","../../src/with.ts","../../src/repeat-utilities.ts","../../src/array-repeat-strategy.ts","../../src/map-repeat-strategy.ts","../../src/null-repeat-strategy.ts","../../src/number-repeat-strategy.ts","../../src/set-repeat-strategy.ts","../../src/repeat-strategy-locator.ts","../../src/analyze-view-factory.ts","../../src/abstract-repeater.ts","../../src/repeat.ts","../../src/aurelia-hide-style.ts","../../src/show.ts","../../src/hide.ts","../../src/html-sanitizer.ts","../../src/sanitize-html.ts","../../src/replaceable.ts","../../src/focus.ts","../../src/css-resource.ts","../../src/attr-binding-behavior.ts","../../src/binding-mode-behaviors.ts","../../src/throttle-binding-behavior.ts","../../src/debounce-binding-behavior.ts","../../src/self-binding-behavior.ts","../../src/binding-signaler.ts","../../src/signal-binding-behavior.ts","../../src/update-trigger-binding-behavior.ts","../../src/dynamic-element.ts","../../src/html-resource-plugin.ts","../../src/aurelia-templating-resources.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Container } from 'aurelia-dependency-injection';\r\nimport { DOM } from 'aurelia-pal';\r\nimport { TaskQueue } from 'aurelia-task-queue';\r\nimport { bindable, CompositionContext, CompositionEngine, customElement, noView, View, ViewResources, ViewSlot } from 'aurelia-templating';\r\n\r\n/**\r\n * Available activation strategies for the view and view-model bound to `<compose/>` element\r\n *\r\n * @export\r\n * @enum {string}\r\n */\r\nexport enum ActivationStrategy {\r\n  /**\r\n   * Default activation strategy; the 'activate' lifecycle hook will be invoked when the model changes.\r\n   */\r\n  InvokeLifecycle = 'invoke-lifecycle',\r\n  /**\r\n   * The view/view-model will be recreated, when the \"model\" changes.\r\n   */\r\n  Replace = 'replace'\r\n}\r\n\r\n/**\r\n * Used to compose a new view / view-model template or bind to an existing instance.\r\n */\r\n@noView\r\n@customElement('compose')\r\nexport class Compose {\r\n\r\n  /**@internal */\r\n  static inject() {\r\n    return [DOM.Element, Container, CompositionEngine, ViewSlot, ViewResources, TaskQueue];\r\n  }\r\n\r\n  /**\r\n   * Model to bind the custom element to.\r\n   *\r\n   * @property model\r\n   * @type {CustomElement}\r\n   */\r\n  @bindable model: any;\r\n  /**\r\n   * View to bind the custom element to.\r\n   *\r\n   * @property view\r\n   * @type {HtmlElement}\r\n   */\r\n  @bindable view: any;\r\n  /**\r\n   * View-model to bind the custom element's template to.\r\n   *\r\n   * @property viewModel\r\n   * @type {Class}\r\n   */\r\n  @bindable viewModel: any;\r\n\r\n  /**\r\n   * Strategy to activate the view-model. Default is \"invoke-lifecycle\".\r\n   * Bind \"replace\" to recreate the view/view-model when the model changes.\r\n   *\r\n   * @property activationStrategy\r\n   * @type {ActivationStrategy}\r\n   */\r\n  @bindable activationStrategy: ActivationStrategy = ActivationStrategy.InvokeLifecycle;\r\n\r\n  /**\r\n   * SwapOrder to control the swapping order of the custom element's view.\r\n   *\r\n   * @property view\r\n   * @type {String}\r\n   */\r\n  @bindable swapOrder: any;\r\n\r\n  /**\r\n   *@internal\r\n   */\r\n  element: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  container: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  compositionEngine: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  viewSlot: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  viewResources: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  taskQueue: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  currentController: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  currentViewModel: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  changes: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  owningView: View;\r\n  /**\r\n   *@internal\r\n   */\r\n  bindingContext: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  overrideContext: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  pendingTask: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  updateRequested: any;\r\n\r\n  /**\r\n   * Creates an instance of Compose.\r\n   * @param element The Compose element.\r\n   * @param container The dependency injection container instance.\r\n   * @param compositionEngine CompositionEngine instance to compose the element.\r\n   * @param viewSlot The slot the view is injected in to.\r\n   * @param viewResources Collection of resources used to compile the the view.\r\n   * @param taskQueue The TaskQueue instance.\r\n   */\r\n  constructor(element, container, compositionEngine, viewSlot, viewResources, taskQueue) {\r\n    this.element = element;\r\n    this.container = container;\r\n    this.compositionEngine = compositionEngine;\r\n    this.viewSlot = viewSlot;\r\n    this.viewResources = viewResources;\r\n    this.taskQueue = taskQueue;\r\n    this.currentController = null;\r\n    this.currentViewModel = null;\r\n    this.changes = Object.create(null);\r\n  }\r\n\r\n  /**\r\n   * Invoked when the component has been created.\r\n   *\r\n   * @param owningView The view that this component was created inside of.\r\n   */\r\n  created(owningView: View) {\r\n    this.owningView = owningView;\r\n  }\r\n\r\n  /**\r\n   * Used to set the bindingContext.\r\n   *\r\n   * @param bindingContext The context in which the view model is executed in.\r\n   * @param overrideContext The context in which the view model is executed in.\r\n   */\r\n  bind(bindingContext, overrideContext) {\r\n    this.bindingContext = bindingContext;\r\n    this.overrideContext = overrideContext;\r\n    let changes = this.changes;\r\n    changes.view = this.view;\r\n    changes.viewModel = this.viewModel;\r\n    changes.model = this.model;\r\n    if (!this.pendingTask) {\r\n      processChanges(this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unbinds the Compose.\r\n   */\r\n  unbind() {\r\n    this.changes = Object.create(null);\r\n    this.bindingContext = null;\r\n    this.overrideContext = null;\r\n    let returnToCache = true;\r\n    let skipAnimation = true;\r\n    this.viewSlot.removeAll(returnToCache, skipAnimation);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound model changes.\r\n   * @param newValue The new value.\r\n   * @param oldValue The old value.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  modelChanged(newValue, oldValue) {\r\n    this.changes.model = newValue;\r\n    requestUpdate(this);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound view changes.\r\n   * @param newValue The new value.\r\n   * @param oldValue The old value.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  viewChanged(newValue, oldValue) {\r\n    this.changes.view = newValue;\r\n    requestUpdate(this);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound view model changes.\r\n   * @param newValue The new value.\r\n   * @param oldValue The old value.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  viewModelChanged(newValue, oldValue) {\r\n    this.changes.viewModel = newValue;\r\n    requestUpdate(this);\r\n  }\r\n}\r\n\r\nfunction isEmpty(obj) {\r\n  for (const _ in obj) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction tryActivateViewModel(vm, model) {\r\n  if (vm && typeof vm.activate === 'function') {\r\n    return Promise.resolve(vm.activate(model));\r\n  }\r\n}\r\n\r\nfunction createInstruction(composer: Compose, instruction: CompositionContext): CompositionContext {\r\n  return Object.assign(instruction, {\r\n    bindingContext: composer.bindingContext,\r\n    overrideContext: composer.overrideContext,\r\n    owningView: composer.owningView,\r\n    container: composer.container,\r\n    viewSlot: composer.viewSlot,\r\n    viewResources: composer.viewResources,\r\n    currentController: composer.currentController,\r\n    host: composer.element,\r\n    swapOrder: composer.swapOrder\r\n  });\r\n}\r\n\r\nfunction processChanges(composer: Compose) {\r\n  const changes = composer.changes;\r\n  composer.changes = Object.create(null);\r\n\r\n  if (needsReInitialization(composer, changes)) {\r\n    // init context\r\n    let instruction = {\r\n      view: composer.view,\r\n      viewModel: composer.currentViewModel || composer.viewModel,\r\n      model: composer.model\r\n    } as CompositionContext;\r\n\r\n    // apply changes\r\n    instruction = Object.assign(instruction, changes);\r\n\r\n    // create context\r\n    instruction = createInstruction(composer, instruction);\r\n\r\n    composer.pendingTask = composer.compositionEngine.compose(instruction).then(controller => {\r\n      composer.currentController = controller;\r\n      composer.currentViewModel = controller ? controller.viewModel : null;\r\n    });\r\n  } else {\r\n    // just try to activate the current view model\r\n    composer.pendingTask = tryActivateViewModel(composer.currentViewModel, changes.model);\r\n    if (!composer.pendingTask) { return; }\r\n  }\r\n\r\n  composer.pendingTask = composer.pendingTask\r\n    .then(() => {\r\n      completeCompositionTask(composer);\r\n    }, reason => {\r\n      completeCompositionTask(composer);\r\n      throw reason;\r\n    });\r\n}\r\n\r\nfunction completeCompositionTask(composer) {\r\n  composer.pendingTask = null;\r\n  if (!isEmpty(composer.changes)) {\r\n    processChanges(composer);\r\n  }\r\n}\r\n\r\nfunction requestUpdate(composer: Compose) {\r\n  if (composer.pendingTask || composer.updateRequested) { return; }\r\n  composer.updateRequested = true;\r\n  composer.taskQueue.queueMicroTask(() => {\r\n    composer.updateRequested = false;\r\n    processChanges(composer);\r\n  });\r\n}\r\n\r\nfunction needsReInitialization(composer: Compose, changes: any) {\r\n  let activationStrategy = composer.activationStrategy;\r\n  const vm = composer.currentViewModel;\r\n  if (vm && typeof vm.determineActivationStrategy === 'function') {\r\n    activationStrategy = vm.determineActivationStrategy();\r\n  }\r\n\r\n  return 'view' in changes\r\n    || 'viewModel' in changes\r\n    || activationStrategy === ActivationStrategy.Replace;\r\n}\r\n","import { ViewFactory, ViewSlot } from 'aurelia-templating';\r\n\r\n/**\r\n * For internal use only. May change without warning.\r\n */\r\nexport class IfCore {\r\n  /**\r\n   * @internal\r\n   */\r\n  viewFactory: ViewFactory;\r\n  /**\r\n   * @internal\r\n   */\r\n  viewSlot: ViewSlot;\r\n  /**\r\n   * @internal\r\n   */\r\n  view: any;\r\n  /**\r\n   * @internal\r\n   */\r\n  bindingContext: any;\r\n  /**\r\n   * @internal\r\n   */\r\n  overrideContext: any;\r\n  /**\r\n   * @internal\r\n   */\r\n  showing: boolean;\r\n  /**\r\n   * @internal\r\n   */\r\n  cache: boolean | string;\r\n\r\n  constructor(viewFactory: ViewFactory, viewSlot: ViewSlot) {\r\n    this.viewFactory = viewFactory;\r\n    this.viewSlot = viewSlot;\r\n    this.view = null;\r\n    this.bindingContext = null;\r\n    this.overrideContext = null;\r\n    // If the child view is animated, `value` might not reflect the internal\r\n    // state anymore, so we use `showing` for that.\r\n    // Eventually, `showing` and `value` should be consistent.\r\n    this.showing = false;\r\n    this.cache = true;\r\n  }\r\n\r\n  bind(bindingContext, overrideContext) {\r\n    // Store parent bindingContext, so we can pass it down\r\n    this.bindingContext = bindingContext;\r\n    this.overrideContext = overrideContext;\r\n  }\r\n\r\n  unbind() {\r\n    if (this.view === null) {\r\n      return;\r\n    }\r\n\r\n    this.view.unbind();\r\n\r\n    // It seems to me that this code is subject to race conditions when animating.\r\n    // For example a view could be returned to the cache and reused while it's still\r\n    // attached to the DOM and animated.\r\n    if (!this.viewFactory.isCaching) {\r\n      return;\r\n    }\r\n\r\n    if (this.showing) {\r\n      this.showing = false;\r\n      this.viewSlot.remove(this.view, /*returnToCache:*/true, /*skipAnimation:*/true);\r\n    } else {\r\n      this.view.returnToCache();\r\n    }\r\n\r\n    this.view = null;\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _show() {\r\n    if (this.showing) {\r\n      // Ensures the view is bound.\r\n      // It might not be the case when the if was unbound but not detached, then rebound.\r\n      // Typical case where this happens is nested ifs\r\n      if (!this.view.isBound) {\r\n        this.view.bind(this.bindingContext, this.overrideContext);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (this.view === null) {\r\n      this.view = (this.viewFactory as any).create();\r\n    }\r\n\r\n    if (!this.view.isBound) {\r\n      this.view.bind(this.bindingContext, this.overrideContext);\r\n    }\r\n\r\n    this.showing = true;\r\n    return this.viewSlot.add(this.view); // Promise or void\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _hide() {\r\n    if (!this.showing) {\r\n      return;\r\n    }\r\n\r\n    this.showing = false;\r\n    let removed = this.viewSlot.remove(this.view); // Promise or View\r\n\r\n    if (removed instanceof Promise) {\r\n      return removed.then(() => {\r\n        this._unbindView();\r\n      });\r\n    }\r\n\r\n    this._unbindView();\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _unbindView() {\r\n    const cache = this.cache === 'false' ? false : !!this.cache;\r\n    this.view.unbind();\r\n    if (!cache) {\r\n      this.view = null;\r\n    }\r\n  }\r\n}\r\n","import {BoundViewFactory, ViewSlot, bindable, customAttribute, templateController} from 'aurelia-templating';\r\nimport {inject} from 'aurelia-dependency-injection';\r\nimport {IfCore} from './if-core';\r\n\r\n/**\r\n * Binding to conditionally include or not include template logic depending on returned result\r\n * - value should be Boolean or will be treated as such (truthy / falsey)\r\n */\r\n@customAttribute('if')\r\n@templateController\r\n@inject(BoundViewFactory, ViewSlot)\r\nexport class If extends IfCore {\r\n  @bindable({ primaryProperty: true }) condition: any;\r\n  @bindable swapOrder: 'before'|'with'|'after';\r\n  @bindable cache: boolean|string = true;\r\n\r\n  /**@internal*/\r\n  animating: any;\r\n  /**@internal*/\r\n  elseVm: any;\r\n\r\n  /**\r\n   * Binds the if to the binding context and override context\r\n   * @param bindingContext The binding context\r\n   * @param overrideContext An override context for binding.\r\n   */\r\n  bind(bindingContext, overrideContext) {\r\n    super.bind(bindingContext, overrideContext);\r\n    if (this.condition) {\r\n      this._show();\r\n    } else {\r\n      this._hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime value property changes.\r\n   * @param newValue The new value\r\n   */\r\n  conditionChanged(newValue) {\r\n    this._update(newValue);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _update(show) {\r\n    if (this.animating) {\r\n      return;\r\n    }\r\n\r\n    let promise;\r\n    if (this.elseVm) {\r\n      promise = show ? this._swap(this.elseVm, this) : this._swap(this, this.elseVm);\r\n    } else {\r\n      promise = show ? this._show() : this._hide();\r\n    }\r\n\r\n    if (promise) {\r\n      this.animating = true;\r\n      promise.then(() => {\r\n        this.animating = false;\r\n        if (this.condition !== this.showing) {\r\n          this._update(this.condition);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _swap(remove, add) {\r\n    switch (this.swapOrder) {\r\n    case 'before':\r\n      return Promise.resolve(add._show()).then(() => remove._hide());\r\n    case 'with':\r\n      return Promise.all([ remove._hide(), add._show() ]);\r\n    default:  // \"after\", default and unknown values\r\n      let promise = remove._hide();\r\n      return promise ? promise.then(() => add._show()) : add._show();\r\n    }\r\n  }\r\n}\r\n","import { inject } from 'aurelia-dependency-injection';\r\nimport { BoundViewFactory, customAttribute, templateController, ViewSlot } from 'aurelia-templating';\r\nimport { IfCore } from './if-core';\r\n\r\n@customAttribute('else')\r\n@templateController\r\n@inject(BoundViewFactory, ViewSlot)\r\nexport class Else extends IfCore {\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ifVm: any;\r\n\r\n  constructor(viewFactory, viewSlot) {\r\n    super(viewFactory, viewSlot);\r\n    this._registerInIf();\r\n  }\r\n\r\n  bind(bindingContext, overrideContext) {\r\n    super.bind(bindingContext, overrideContext);\r\n    // Render on initial\r\n    if (this.ifVm.condition) {\r\n      this._hide();\r\n    } else {\r\n      this._show();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _registerInIf() {\r\n    // We support the pattern <div if.bind=\"x\"></div><div else></div>.\r\n    // Obvisouly between the two, we must accepts text (spaces) and comments.\r\n    // The `if` node is expected to be a comment anchor, because of `@templateController`.\r\n    // To simplify the code we basically walk up to the first Aurelia predecessor,\r\n    // so having static tags in between (no binding) would work but is not intended to be supported.\r\n    let previous = (this.viewSlot as ViewSlot & { anchor: any}).anchor.previousSibling;\r\n    while (previous && !previous.au) {\r\n      previous = previous.previousSibling;\r\n    }\r\n    if (!previous || !previous.au.if) {\r\n      throw new Error(\"Can't find matching If for Else custom attribute.\");\r\n    }\r\n    this.ifVm = previous.au.if.viewModel;\r\n    this.ifVm.elseVm = this;\r\n  }\r\n}\r\n","import {inject} from 'aurelia-dependency-injection';\r\nimport {BoundViewFactory, ViewSlot, customAttribute, templateController, ViewFactory} from 'aurelia-templating';\r\nimport {createOverrideContext} from 'aurelia-binding';\r\n\r\n/**\r\n * Creates a binding context for decandant elements to bind to.\r\n */\r\n@customAttribute('with')\r\n@templateController\r\n@inject(BoundViewFactory, ViewSlot)\r\nexport class With {\r\n\r\n  /**@internal*/\r\n  viewFactory: any;\r\n  /**@internal*/\r\n  viewSlot: any;\r\n  /**@internal*/\r\n  parentOverrideContext: any;\r\n  /**@internal*/\r\n  view: any;\r\n\r\n  value: any;\r\n\r\n  /**\r\n   * Creates an instance of With.\r\n   * @param viewFactory The factory generating the view.\r\n   * @param viewSlot The slot the view is injected in to.\r\n   */\r\n  constructor(viewFactory: ViewFactory, viewSlot: ViewSlot) {\r\n    this.viewFactory = viewFactory;\r\n    this.viewSlot = viewSlot;\r\n    this.parentOverrideContext = null;\r\n    this.view = null;\r\n  }\r\n\r\n  /**\r\n   * Binds the With with provided binding context and override context.\r\n   * @param bindingContext The binding context.\r\n   * @param overrideContext An override context for binding.\r\n   */\r\n  bind(bindingContext, overrideContext) {\r\n    this.parentOverrideContext = overrideContext;\r\n    this.valueChanged(this.value);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound value changes.\r\n   * @param newValue The new value.\r\n   */\r\n  valueChanged(newValue) {\r\n    let overrideContext = createOverrideContext(newValue, this.parentOverrideContext);\r\n    let view = this.view;\r\n    if (!view) {\r\n      view = this.view = this.viewFactory.create();\r\n      view.bind(newValue, overrideContext);\r\n      this.viewSlot.add(view);\r\n    } else {\r\n      view.bind(newValue, overrideContext);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unbinds With\r\n   */\r\n  unbind() {\r\n    let view = this.view;\r\n    this.parentOverrideContext = null;\r\n\r\n    if (view) {\r\n      view.unbind();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  createOverrideContext,\r\n  BindingBehavior,\r\n  ValueConverter,\r\n  sourceContext,\r\n  bindingMode,\r\n  OverrideContext\r\n} from 'aurelia-binding';\r\n\r\nconst oneTime = bindingMode.oneTime;\r\n\r\n/**\r\n * Update the override context.\r\n * @param startIndex index in collection where to start updating.\r\n */\r\nexport function updateOverrideContexts(views, startIndex) {\r\n  let length = views.length;\r\n\r\n  if (startIndex > 0) {\r\n    startIndex = startIndex - 1;\r\n  }\r\n\r\n  for (; startIndex < length; ++startIndex) {\r\n    updateOverrideContext(views[startIndex].overrideContext, startIndex, length);\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a complete override context.\r\n * @param data The item's value.\r\n * @param index The item's index.\r\n * @param length The collections total length.\r\n * @param key The key in a key/value pair.\r\n */\r\nexport function createFullOverrideContext(repeat, data, index, length, key?: string): OverrideContext {\r\n  let bindingContext = {};\r\n  let overrideContext = createOverrideContext(bindingContext, repeat.scope.overrideContext);\r\n  // is key/value pair (Map)\r\n  if (typeof key !== 'undefined') {\r\n    bindingContext[repeat.key] = key;\r\n    bindingContext[repeat.value] = data;\r\n  } else {\r\n    bindingContext[repeat.local] = data;\r\n  }\r\n  updateOverrideContext(overrideContext, index, length);\r\n  return overrideContext;\r\n}\r\n\r\n/**\r\n * Updates the override context.\r\n * @param context The context to be updated.\r\n * @param index The context's index.\r\n * @param length The collection's length.\r\n */\r\nexport function updateOverrideContext(overrideContext, index, length) {\r\n  let first = (index === 0);\r\n  let last = (index === length - 1);\r\n  let even = index % 2 === 0;\r\n\r\n  overrideContext.$index = index;\r\n  overrideContext.$first = first;\r\n  overrideContext.$last = last;\r\n  overrideContext.$middle = !(first || last);\r\n  overrideContext.$odd = !even;\r\n  overrideContext.$even = even;\r\n}\r\n\r\n/**\r\n * Gets a repeat instruction's source expression.\r\n */\r\nexport function getItemsSourceExpression(instruction, attrName) {\r\n  return instruction.behaviorInstructions\r\n    .filter(bi => bi.originalAttrName === attrName)[0]\r\n    .attributes\r\n    .items\r\n    .sourceExpression;\r\n}\r\n\r\n/**\r\n * Unwraps an expression to expose the inner, pre-converted / behavior-free expression.\r\n */\r\nexport function unwrapExpression(expression) {\r\n  let unwrapped = false;\r\n  while (expression instanceof BindingBehavior) {\r\n    expression = expression.expression;\r\n  }\r\n  while (expression instanceof ValueConverter) {\r\n    expression = expression.expression;\r\n    unwrapped = true;\r\n  }\r\n  return unwrapped ? expression : null;\r\n}\r\n\r\n/**\r\n * Returns whether an expression has the OneTimeBindingBehavior applied.\r\n */\r\nexport function isOneTime(expression) {\r\n  while (expression instanceof BindingBehavior) {\r\n    if (expression.name === 'oneTime') {\r\n      return true;\r\n    }\r\n    expression = expression.expression;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Forces a binding instance to reevaluate.\r\n */\r\nexport function updateOneTimeBinding(binding) {\r\n  if (binding.call && binding.mode === oneTime) {\r\n    binding.call(sourceContext);\r\n  } else if (binding.updateOneTimeBindings) {\r\n    binding.updateOneTimeBindings();\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the index of the element in an array, optionally using a matcher function.\r\n */\r\nexport function indexOf(array, item, matcher, startIndex?: number) {\r\n  if (!matcher) {\r\n    // native indexOf is more performant than a for loop\r\n    return array.indexOf(item);\r\n  }\r\n  const length = array.length;\r\n  for (let index = startIndex || 0; index < length; index++) {\r\n    if (matcher(array[index], item)) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n","import {createFullOverrideContext, updateOverrideContexts, updateOverrideContext, indexOf} from './repeat-utilities';\r\nimport {mergeSplice} from 'aurelia-binding';\r\nimport { Repeat } from './repeat';\r\n\r\n/**\r\n * A strategy for repeating a template over an array.\r\n */\r\nexport class ArrayRepeatStrategy {\r\n  /**\r\n   * Gets an observer for the specified collection.\r\n   * @param observerLocator The observer locator instance.\r\n   * @param items The items to be observed.\r\n   */\r\n  getCollectionObserver(observerLocator, items) {\r\n    return observerLocator.getArrayObserver(items);\r\n  }\r\n\r\n  /**\r\n   * Handle the repeat's collection instance changing.\r\n   * @param repeat The repeater instance.\r\n   * @param items The new array instance.\r\n   */\r\n  instanceChanged(repeat, items) {\r\n    const $repeat = repeat as Repeat;\r\n    const itemsLength = items.length;\r\n\r\n    // if the new instance does not contain any items,\r\n    // just remove all views and don't do any further processing\r\n    if (!items || itemsLength === 0) {\r\n      $repeat.removeAllViews(true, !$repeat.viewsRequireLifecycle);\r\n      return;\r\n    }\r\n\r\n    const children = $repeat.views();\r\n    const viewsLength = children.length;\r\n\r\n    // likewise, if we previously didn't have any views,\r\n    // simply make them and return\r\n    if (viewsLength === 0) {\r\n      this._standardProcessInstanceChanged($repeat, items);\r\n      return;\r\n    }\r\n\r\n    if ($repeat.viewsRequireLifecycle) {\r\n      const childrenSnapshot = children.slice(0);\r\n      const itemNameInBindingContext = $repeat.local;\r\n      const matcher = $repeat.matcher();\r\n\r\n      // the cache of the current state (it will be transformed along with the views to keep track of indicies)\r\n      let itemsPreviouslyInViews = [];\r\n      const viewsToRemove = [];\r\n\r\n      for (let index = 0; index < viewsLength; index++) {\r\n        const view = childrenSnapshot[index];\r\n        const oldItem = view.bindingContext[itemNameInBindingContext];\r\n\r\n        if (indexOf(items, oldItem, matcher) === -1) {\r\n          // remove the item if no longer in the new instance of items\r\n          viewsToRemove.push(view);\r\n        } else {\r\n          // or add the item to the cache list\r\n          itemsPreviouslyInViews.push(oldItem);\r\n        }\r\n      }\r\n\r\n      let updateViews;\r\n      let removePromise;\r\n\r\n      if (itemsPreviouslyInViews.length > 0) {\r\n        removePromise = $repeat.removeViews(viewsToRemove, true, !$repeat.viewsRequireLifecycle);\r\n        updateViews = () => {\r\n          // update views (create new and move existing)\r\n          for (let index = 0; index < itemsLength; index++) {\r\n            const item = items[index];\r\n            const indexOfView = indexOf(itemsPreviouslyInViews, item, matcher, index);\r\n            let view;\r\n\r\n            if (indexOfView === -1) { // create views for new items\r\n              const overrideContext = createFullOverrideContext($repeat, items[index], index, itemsLength);\r\n              $repeat.insertView(index, overrideContext.bindingContext, overrideContext);\r\n              // reflect the change in our cache list so indicies are valid\r\n              itemsPreviouslyInViews.splice(index, 0, undefined);\r\n            } else if (indexOfView === index) { // leave unchanged items\r\n              view = children[indexOfView];\r\n              itemsPreviouslyInViews[indexOfView] = undefined;\r\n            } else { // move the element to the right place\r\n              view = children[indexOfView];\r\n              $repeat.moveView(indexOfView, index);\r\n              itemsPreviouslyInViews.splice(indexOfView, 1);\r\n              itemsPreviouslyInViews.splice(index, 0, undefined);\r\n            }\r\n\r\n            if (view) {\r\n              updateOverrideContext(view.overrideContext, index, itemsLength);\r\n            }\r\n          }\r\n\r\n          // remove extraneous elements in case of duplicates,\r\n          // also update binding contexts if objects changed using the matcher function\r\n          this._inPlaceProcessItems($repeat, items);\r\n        };\r\n      } else {\r\n        // if all of the items are different, remove all and add all from scratch\r\n        removePromise = $repeat.removeAllViews(true, !$repeat.viewsRequireLifecycle);\r\n        updateViews = () => this._standardProcessInstanceChanged($repeat, items);\r\n      }\r\n\r\n      if (removePromise instanceof Promise) {\r\n        removePromise.then(updateViews);\r\n      } else {\r\n        updateViews();\r\n      }\r\n    } else {\r\n      // no lifecycle needed, use the fast in-place processing\r\n      this._inPlaceProcessItems($repeat, items);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _standardProcessInstanceChanged(repeat, items) {\r\n    for (let i = 0, ii = items.length; i < ii; i++) {\r\n      let overrideContext = createFullOverrideContext(repeat, items[i], i, ii);\r\n      repeat.addView(overrideContext.bindingContext, overrideContext);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _inPlaceProcessItems(repeat, items) {\r\n    let itemsLength = items.length;\r\n    let viewsLength = repeat.viewCount();\r\n    // remove unneeded views.\r\n    while (viewsLength > itemsLength) {\r\n      viewsLength--;\r\n      repeat.removeView(viewsLength, true, !repeat.viewsRequireLifecycle);\r\n    }\r\n    // avoid repeated evaluating the property-getter for the \"local\" property.\r\n    let local = repeat.local;\r\n    // re-evaluate bindings on existing views.\r\n    for (let i = 0; i < viewsLength; i++) {\r\n      let view = repeat.view(i);\r\n      let last = i === itemsLength - 1;\r\n      let middle = i !== 0 && !last;\r\n      let bindingContext = view.bindingContext;\r\n      let overrideContext = view.overrideContext;\r\n      // any changes to the binding context?\r\n      if (bindingContext[local] === items[i]\r\n        && overrideContext.$middle === middle\r\n        && overrideContext.$last === last) {\r\n        // no changes. continue...\r\n        continue;\r\n      }\r\n      // update the binding context and refresh the bindings.\r\n      bindingContext[local] = items[i];\r\n      overrideContext.$middle = middle;\r\n      overrideContext.$last = last;\r\n      repeat.updateBindings(view);\r\n    }\r\n    // add new views\r\n    for (let i = viewsLength; i < itemsLength; i++) {\r\n      let overrideContext = createFullOverrideContext(repeat, items[i], i, itemsLength);\r\n      repeat.addView(overrideContext.bindingContext, overrideContext);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle the repeat's collection instance mutating.\r\n   * @param repeat The repeat instance.\r\n   * @param array The modified array.\r\n   * @param splices Records of array changes.\r\n   */\r\n  instanceMutated(repeat, array, splices) {\r\n    if (repeat.__queuedSplices) {\r\n      for (let i = 0, ii = splices.length; i < ii; ++i) {\r\n        let {index, removed, addedCount} = splices[i];\r\n        mergeSplice(repeat.__queuedSplices, index, removed, addedCount);\r\n      }\r\n      // Array.prototype.slice is used here to clone the array\r\n      repeat.__array = array.slice(0);\r\n      return;\r\n    }\r\n\r\n    // Array.prototype.slice is used here to clone the array\r\n    let maybePromise = this._runSplices(repeat, array.slice(0), splices);\r\n    if (maybePromise instanceof Promise) {\r\n      let queuedSplices = repeat.__queuedSplices = [];\r\n\r\n      let runQueuedSplices = () => {\r\n        if (!queuedSplices.length) {\r\n          repeat.__queuedSplices = undefined;\r\n          repeat.__array = undefined;\r\n          return;\r\n        }\r\n\r\n        let nextPromise = this._runSplices(repeat, repeat.__array, queuedSplices) || Promise.resolve();\r\n        queuedSplices = repeat.__queuedSplices = [];\r\n        nextPromise.then(runQueuedSplices);\r\n      };\r\n\r\n      maybePromise.then(runQueuedSplices);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Run a normalised set of splices against the viewSlot children.\r\n   * @param repeat The repeat instance.\r\n   * @param array The modified array.\r\n   * @param splices Records of array changes.\r\n   * @return {Promise|undefined} A promise if animations have to be run.\r\n   * @pre The splices must be normalised so as:\r\n   *  * Any item added may not be later removed.\r\n   *  * Removals are ordered by asending index\r\n   * @internal\r\n   */\r\n  _runSplices(repeat, array, splices) {\r\n    let removeDelta = 0;\r\n    let rmPromises = [];\r\n\r\n    for (let i = 0, ii = splices.length; i < ii; ++i) {\r\n      let splice = splices[i];\r\n      let removed = splice.removed;\r\n\r\n      for (let j = 0, jj = removed.length; j < jj; ++j) {\r\n        // the rmPromises.length correction works due to the ordered removal precondition\r\n        let viewOrPromise = repeat.removeView(splice.index + removeDelta + rmPromises.length, true);\r\n        if (viewOrPromise instanceof Promise) {\r\n          rmPromises.push(viewOrPromise);\r\n        }\r\n      }\r\n      removeDelta -= splice.addedCount;\r\n    }\r\n\r\n    if (rmPromises.length > 0) {\r\n      return Promise.all(rmPromises).then(() => {\r\n        let spliceIndexLow = this._handleAddedSplices(repeat, array, splices);\r\n        updateOverrideContexts(repeat.views(), spliceIndexLow);\r\n      });\r\n    }\r\n\r\n    let spliceIndexLow = this._handleAddedSplices(repeat, array, splices);\r\n    updateOverrideContexts(repeat.views(), spliceIndexLow);\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _handleAddedSplices(repeat, array, splices) {\r\n    let spliceIndex: number;\r\n    let spliceIndexLow: number;\r\n    let arrayLength = array.length;\r\n    for (let i = 0, ii = splices.length; i < ii; ++i) {\r\n      let splice = splices[i];\r\n      let addIndex = spliceIndex = splice.index;\r\n      let end = splice.index + splice.addedCount;\r\n\r\n      if (typeof spliceIndexLow === 'undefined' || spliceIndexLow === null || spliceIndexLow > splice.index) {\r\n        spliceIndexLow = spliceIndex;\r\n      }\r\n\r\n      for (; addIndex < end; ++addIndex) {\r\n        let overrideContext = createFullOverrideContext(repeat, array[addIndex], addIndex, arrayLength);\r\n        repeat.insertView(addIndex, overrideContext.bindingContext, overrideContext);\r\n      }\r\n    }\r\n\r\n    return spliceIndexLow;\r\n  }\r\n}\r\n","import {createFullOverrideContext, updateOverrideContexts} from './repeat-utilities';\r\n\r\n/**\r\n * A strategy for repeating a template over a Map.\r\n */\r\nexport class MapRepeatStrategy {\r\n  /**\r\n   * Gets a Map observer.\r\n   * @param items The items to be observed.\r\n   */\r\n  getCollectionObserver(observerLocator, items) {\r\n    return observerLocator.getMapObserver(items);\r\n  }\r\n\r\n  /**\r\n   * Process the provided Map entries.\r\n   * @param items The entries to process.\r\n   */\r\n  instanceChanged(repeat, items) {\r\n    let removePromise = repeat.removeAllViews(true, !repeat.viewsRequireLifecycle);\r\n    if (removePromise instanceof Promise) {\r\n      removePromise.then(() => this._standardProcessItems(repeat, items));\r\n      return;\r\n    }\r\n    this._standardProcessItems(repeat, items);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _standardProcessItems(repeat, items) {\r\n    let index = 0;\r\n    let overrideContext;\r\n\r\n    items.forEach((value, key) => {\r\n      overrideContext = createFullOverrideContext(repeat, value, index, items.size, key);\r\n      repeat.addView(overrideContext.bindingContext, overrideContext);\r\n      ++index;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle changes in a Map collection.\r\n   * @param map The underlying Map collection.\r\n   * @param records The change records.\r\n   */\r\n  instanceMutated(repeat, map, records) {\r\n    let key;\r\n    let i;\r\n    let ii;\r\n    let overrideContext;\r\n    let removeIndex;\r\n    let addIndex;\r\n    let record;\r\n    let rmPromises = [];\r\n    let viewOrPromise;\r\n\r\n    for (i = 0, ii = records.length; i < ii; ++i) {\r\n      record = records[i];\r\n      key = record.key;\r\n      switch (record.type) {\r\n      case 'update':\r\n        removeIndex = this._getViewIndexByKey(repeat, key);\r\n        viewOrPromise = repeat.removeView(removeIndex, true, !repeat.viewsRequireLifecycle);\r\n        if (viewOrPromise instanceof Promise) {\r\n          rmPromises.push(viewOrPromise);\r\n        }\r\n        overrideContext = createFullOverrideContext(repeat, map.get(key), removeIndex, map.size, key);\r\n        repeat.insertView(removeIndex, overrideContext.bindingContext, overrideContext);\r\n        break;\r\n      case 'add':\r\n        addIndex = repeat.viewCount() <= map.size - 1 ? repeat.viewCount() : map.size - 1;\r\n        overrideContext = createFullOverrideContext(repeat, map.get(key), addIndex, map.size, key);\r\n        repeat.insertView(map.size - 1, overrideContext.bindingContext, overrideContext);\r\n        break;\r\n      case 'delete':\r\n        if (record.oldValue === undefined) { return; }\r\n        removeIndex = this._getViewIndexByKey(repeat, key);\r\n        viewOrPromise = repeat.removeView(removeIndex, true, !repeat.viewsRequireLifecycle);\r\n        if (viewOrPromise instanceof Promise) {\r\n          rmPromises.push(viewOrPromise);\r\n        }\r\n        break;\r\n      case 'clear':\r\n        repeat.removeAllViews(true, !repeat.viewsRequireLifecycle);\r\n        break;\r\n      default:\r\n        continue;\r\n      }\r\n    }\r\n\r\n    if (rmPromises.length > 0) {\r\n      Promise.all(rmPromises).then(() => {\r\n        updateOverrideContexts(repeat.views(), 0);\r\n      });\r\n    } else {\r\n      updateOverrideContexts(repeat.views(), 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getViewIndexByKey(repeat, key) {\r\n    let i: number;\r\n    let ii: number;\r\n    let child;\r\n\r\n    for (i = 0, ii = repeat.viewCount(); i < ii; ++i) {\r\n      child = repeat.view(i);\r\n      if (child.bindingContext[repeat.key] === key) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n}\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/**\r\n * A strategy for repeating a template over null or undefined (does nothing)\r\n */\r\nexport class NullRepeatStrategy {\r\n  instanceChanged(repeat, items) {\r\n    repeat.removeAllViews(true);\r\n  }\r\n\r\n  getCollectionObserver(observerLocator, items) {\r\n    // empty\r\n  }\r\n}\r\n","import {createFullOverrideContext, updateOverrideContexts} from './repeat-utilities';\r\n\r\n/**\r\n * A strategy for repeating a template over a number.\r\n */\r\nexport class NumberRepeatStrategy {\r\n  /**\r\n   * Return the strategies collection observer. In this case none.\r\n   */\r\n  getCollectionObserver() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Process the provided Number.\r\n   * @param value The Number of how many time to iterate.\r\n   */\r\n  instanceChanged(repeat, value) {\r\n    let removePromise = repeat.removeAllViews(true, !repeat.viewsRequireLifecycle);\r\n    if (removePromise instanceof Promise) {\r\n      removePromise.then(() => this._standardProcessItems(repeat, value));\r\n      return;\r\n    }\r\n    this._standardProcessItems(repeat, value);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _standardProcessItems(repeat, value) {\r\n    let childrenLength = repeat.viewCount();\r\n    let i;\r\n    let ii;\r\n    let overrideContext;\r\n    let viewsToRemove;\r\n\r\n    value = Math.floor(value);\r\n    viewsToRemove = childrenLength - value;\r\n\r\n    if (viewsToRemove > 0) {\r\n      if (viewsToRemove > childrenLength) {\r\n        viewsToRemove = childrenLength;\r\n      }\r\n\r\n      for (i = 0, ii = viewsToRemove; i < ii; ++i) {\r\n        repeat.removeView(childrenLength - (i + 1), true, !repeat.viewsRequireLifecycle);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    for (i = childrenLength, ii = value; i < ii; ++i) {\r\n      overrideContext = createFullOverrideContext(repeat, i, i, ii);\r\n      repeat.addView(overrideContext.bindingContext, overrideContext);\r\n    }\r\n\r\n    updateOverrideContexts(repeat.views(), 0);\r\n  }\r\n}\r\n","import {createFullOverrideContext, updateOverrideContexts} from './repeat-utilities';\r\n\r\n/**\r\n * A strategy for repeating a template over a Set.\r\n */\r\nexport class SetRepeatStrategy {\r\n  /**\r\n   * Gets a Set observer.\r\n   * @param items The items to be observed.\r\n   */\r\n  getCollectionObserver(observerLocator, items) {\r\n    return observerLocator.getSetObserver(items);\r\n  }\r\n\r\n  /**\r\n   * Process the provided Set entries.\r\n   * @param items The entries to process.\r\n   */\r\n  instanceChanged(repeat, items) {\r\n    let removePromise = repeat.removeAllViews(true, !repeat.viewsRequireLifecycle);\r\n    if (removePromise instanceof Promise) {\r\n      removePromise.then(() => this._standardProcessItems(repeat, items));\r\n      return;\r\n    }\r\n    this._standardProcessItems(repeat, items);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _standardProcessItems(repeat, items) {\r\n    let index = 0;\r\n    let overrideContext;\r\n\r\n    items.forEach(value => {\r\n      overrideContext = createFullOverrideContext(repeat, value, index, items.size);\r\n      repeat.addView(overrideContext.bindingContext, overrideContext);\r\n      ++index;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle changes in a Set collection.\r\n   * @param repeat The repeat instance.\r\n   * @param set The underlying Set collection.\r\n   * @param records The change records.\r\n   */\r\n  instanceMutated(repeat, set, records) {\r\n    let value;\r\n    let i;\r\n    let ii;\r\n    let overrideContext;\r\n    let removeIndex;\r\n    let record;\r\n    let rmPromises = [];\r\n    let viewOrPromise;\r\n\r\n    for (i = 0, ii = records.length; i < ii; ++i) {\r\n      record = records[i];\r\n      value = record.value;\r\n      switch (record.type) {\r\n      case 'add':\r\n        let size = Math.max(set.size - 1, 0);\r\n        overrideContext = createFullOverrideContext(repeat, value, size, set.size);\r\n        repeat.insertView(size, overrideContext.bindingContext, overrideContext);\r\n        break;\r\n      case 'delete':\r\n        removeIndex = this._getViewIndexByValue(repeat, value);\r\n        viewOrPromise = repeat.removeView(removeIndex, true, !repeat.viewsRequireLifecycle);\r\n        if (viewOrPromise instanceof Promise) {\r\n          rmPromises.push(viewOrPromise);\r\n        }\r\n        break;\r\n      case 'clear':\r\n        repeat.removeAllViews(true, !repeat.viewsRequireLifecycle);\r\n        break;\r\n      default:\r\n        continue;\r\n      }\r\n    }\r\n\r\n    if (rmPromises.length > 0) {\r\n      Promise.all(rmPromises).then(() => {\r\n        updateOverrideContexts(repeat.views(), 0);\r\n      });\r\n    } else {\r\n      updateOverrideContexts(repeat.views(), 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getViewIndexByValue(repeat, value) {\r\n    let i;\r\n    let ii;\r\n    let child;\r\n\r\n    for (i = 0, ii = repeat.viewCount(); i < ii; ++i) {\r\n      child = repeat.view(i);\r\n      if (child.bindingContext[repeat.local] === value) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n}\r\n","import { ArrayRepeatStrategy } from './array-repeat-strategy';\r\nimport { MapRepeatStrategy } from './map-repeat-strategy';\r\nimport { NullRepeatStrategy } from './null-repeat-strategy';\r\nimport { NumberRepeatStrategy } from './number-repeat-strategy';\r\nimport { Repeat } from './repeat';\r\nimport { SetRepeatStrategy } from './set-repeat-strategy';\r\n\r\n/**\r\n * A strategy is for repeating a template over an iterable or iterable-like object.\r\n */\r\nexport interface RepeatStrategy {\r\n  instanceChanged(repeat: Repeat, items: any): void;\r\n  instanceMutated(repeat: Repeat, items: any, changes: any): void;\r\n  getCollectionObserver(observerLocator: any, items: any): any;\r\n}\r\n\r\n/**\r\n * Locates the best strategy to best repeating a template over different types of collections.\r\n * Custom strategies can be plugged in as well.\r\n */\r\nexport class RepeatStrategyLocator {\r\n\r\n  /**@internal*/\r\n  matchers: any[];\r\n  /**@internal*/\r\n  strategies: any[];\r\n\r\n  /**\r\n   * Creates a new RepeatStrategyLocator.\r\n   */\r\n  constructor() {\r\n    this.matchers = [];\r\n    this.strategies = [];\r\n\r\n    this.addStrategy(items => items === null || items === undefined, new NullRepeatStrategy() as RepeatStrategy);\r\n    this.addStrategy(items => items instanceof Array, new ArrayRepeatStrategy());\r\n    this.addStrategy(items => items instanceof Map, new MapRepeatStrategy());\r\n    this.addStrategy(items => items instanceof Set, new SetRepeatStrategy());\r\n    this.addStrategy(items => typeof items === 'number', new NumberRepeatStrategy() as Partial<RepeatStrategy> as RepeatStrategy);\r\n  }\r\n\r\n  /**\r\n   * Adds a repeat strategy to be located when repeating a template over different collection types.\r\n   * @param strategy A repeat strategy that can iterate a specific collection type.\r\n   */\r\n  addStrategy(matcher: (items: any) => boolean, strategy: RepeatStrategy) {\r\n    this.matchers.push(matcher);\r\n    this.strategies.push(strategy);\r\n  }\r\n\r\n  /**\r\n   * Gets the best strategy to handle iteration.\r\n   */\r\n  getStrategy(items: any): RepeatStrategy {\r\n    let matchers = this.matchers;\r\n\r\n    for (let i = 0, ii = matchers.length; i < ii; ++i) {\r\n      if (matchers[i](items)) {\r\n        return this.strategies[i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n","/**\r\n* Behaviors that do not require the composition lifecycle callbacks when replacing\r\n* their binding context.\r\n*/\r\nexport const lifecycleOptionalBehaviors = ['focus', 'if', 'else', 'repeat', 'show', 'hide', 'with'];\r\n\r\nfunction behaviorRequiresLifecycle(instruction) {\r\n  let t = instruction.type;\r\n  let name = t.elementName !== null ? t.elementName : t.attributeName;\r\n  return lifecycleOptionalBehaviors.indexOf(name) === -1 && (t.handlesAttached || t.handlesBind || t.handlesCreated || t.handlesDetached || t.handlesUnbind)\r\n    || t.viewFactory && viewsRequireLifecycle(t.viewFactory)\r\n    || instruction.viewFactory && viewsRequireLifecycle(instruction.viewFactory);\r\n}\r\n\r\nfunction targetRequiresLifecycle(instruction) {\r\n  // check each behavior instruction.\r\n  let behaviors = instruction.behaviorInstructions;\r\n  if (behaviors) {\r\n    let i = behaviors.length;\r\n    while (i--) {\r\n      if (behaviorRequiresLifecycle(behaviors[i])) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  // check the instruction's view factory (if it has one).\r\n  return instruction.viewFactory && viewsRequireLifecycle(instruction.viewFactory);\r\n}\r\n\r\nexport function viewsRequireLifecycle(viewFactory) {\r\n  // already analyzed?\r\n  if ('_viewsRequireLifecycle' in viewFactory) {\r\n    return viewFactory._viewsRequireLifecycle;\r\n  }\r\n\r\n  // set prop to avoid infinite recursion.\r\n  viewFactory._viewsRequireLifecycle = false;\r\n\r\n  // access inner view factory.\r\n  if (viewFactory.viewFactory) {\r\n    viewFactory._viewsRequireLifecycle = viewsRequireLifecycle(viewFactory.viewFactory);\r\n    return viewFactory._viewsRequireLifecycle;\r\n  }\r\n\r\n  // template uses animation?\r\n  if (viewFactory.template.querySelector('.au-animate')) {\r\n    viewFactory._viewsRequireLifecycle = true;\r\n    return true;\r\n  }\r\n\r\n  // target instructions require lifecycle?\r\n  for (let id in viewFactory.instructions) {\r\n    if (targetRequiresLifecycle(viewFactory.instructions[id])) {\r\n      viewFactory._viewsRequireLifecycle = true;\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // safe to skip lifecycle.\r\n  viewFactory._viewsRequireLifecycle = false;\r\n  return false;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport { View } from 'aurelia-templating';\r\n\r\n/**\r\n* An abstract base class for elements and attributes that repeat\r\n* views.\r\n*/\r\nexport class AbstractRepeater {\r\n  constructor(options) {\r\n    Object.assign(this, {\r\n      local: 'items',\r\n      viewsRequireLifecycle: true\r\n    }, options);\r\n  }\r\n\r\n  /**\r\n   * Returns the number of views the repeater knows about.\r\n   *\r\n   * @return the number of views.\r\n   */\r\n  viewCount(): number {\r\n    throw new Error('subclass must implement `viewCount`');\r\n  }\r\n\r\n  /**\r\n   * Returns all of the repeaters views as an array.\r\n   *\r\n   * @return The repeater's array of views;\r\n   */\r\n  views(): any[] {\r\n    throw new Error('subclass must implement `views`');\r\n  }\r\n\r\n  /**\r\n   * Returns a single view from the repeater at the provided index.\r\n   *\r\n   * @param index The index of the requested view.\r\n   * @return {View|ViewSlot} The requested view.\r\n   */\r\n  view(index: number): any {\r\n    throw new Error('subclass must implement `view`');\r\n  }\r\n\r\n  /**\r\n   * Returns the matcher function to be used by the repeater, or null if strict matching is to be performed.\r\n   *\r\n   * @return The requested matcher function.\r\n   */\r\n  matcher(): Function | null {\r\n    throw new Error('subclass must implement `matcher`');\r\n  }\r\n\r\n  /**\r\n   * Adds a view to the repeater, binding the view to the\r\n   * provided contexts.\r\n   *\r\n   * @param {Object} bindingContext The binding context to bind the new view to.\r\n   * @param {Object} overrideContext A secondary binding context that can override the primary context.\r\n   */\r\n  addView(bindingContext, overrideContext): any {\r\n    throw new Error('subclass must implement `addView`');\r\n  }\r\n\r\n  /**\r\n   * Inserts a view to the repeater at a specific index, binding the view to the\r\n   * provided contexts.\r\n   *\r\n   * @param {Number} index The index at which to create the new view at.\r\n   * @param {Object} bindingContext The binding context to bind the new view to.\r\n   * @param {Object} overrideContext A secondary binding context that can override the primary context.\r\n   */\r\n  insertView(index, bindingContext, overrideContext): any {\r\n    throw new Error('subclass must implement `insertView`');\r\n  }\r\n\r\n  /**\r\n   * Moves a view across the repeater.\r\n   *\r\n   * @param {Number} sourceIndex The index of the view to be moved.\r\n   * @param {Number} sourceIndex The index where the view should be placed at.\r\n   */\r\n  moveView(sourceIndex, targetIndex): any {\r\n    throw new Error('subclass must implement `moveView`');\r\n  }\r\n\r\n  /**\r\n   * Removes all views from the repeater.\r\n   * @param {Boolean} returnToCache Should the view be returned to the view cache?\r\n   * @param {Boolean} skipAnimation Should the removal animation be skipped?\r\n   * @return {Promise|null}\r\n   */\r\n  removeAllViews(returnToCache?: boolean, skipAnimation?: boolean): any {\r\n    throw new Error('subclass must implement `removeAllViews`');\r\n  }\r\n\r\n  /**\r\n   * Removes an array of Views from the repeater.\r\n   *\r\n   * @param {Array} viewsToRemove The array of views to be removed.\r\n   * @param {Boolean} returnToCache Should the view be returned to the view cache?\r\n   * @param {Boolean} skipAnimation Should the removal animation be skipped?\r\n   */\r\n  removeViews(viewsToRemove: Array<View>, returnToCache?: boolean, skipAnimation?: boolean): any {\r\n    throw new Error('subclass must implement `removeView`');\r\n  }\r\n\r\n  /**\r\n   * Removes a view from the repeater at a specific index.\r\n   *\r\n   * @param {Number} index The index of the view to be removed.\r\n   * @param {Boolean} returnToCache Should the view be returned to the view cache?\r\n   * @param {Boolean} skipAnimation Should the removal animation be skipped?\r\n   */\r\n  removeView(index: number, returnToCache?: boolean, skipAnimation?: boolean): any {\r\n    throw new Error('subclass must implement `removeView`');\r\n  }\r\n\r\n  /**\r\n   * Forces a particular view to update it's bindings, called as part of\r\n   * an in-place processing of items for better performance\r\n   *\r\n   * @param {Object} view the target view for bindings updates\r\n   */\r\n  updateBindings(view: View) {\r\n    throw new Error('subclass must implement `updateBindings`');\r\n  }\r\n}\r\n","/*eslint no-loop-func:0, no-unused-vars:0*/\r\nimport {inject} from 'aurelia-dependency-injection';\r\nimport {ObserverLocator, BindingExpression} from 'aurelia-binding';\r\nimport {\r\n  BoundViewFactory,\r\n  TargetInstruction,\r\n  ViewSlot,\r\n  ViewResources,\r\n  customAttribute,\r\n  bindable,\r\n  templateController,\r\n  View,\r\n  ViewFactory\r\n} from 'aurelia-templating';\r\nimport {RepeatStrategyLocator} from './repeat-strategy-locator';\r\nimport {\r\n  getItemsSourceExpression,\r\n  unwrapExpression,\r\n  isOneTime,\r\n  updateOneTimeBinding\r\n} from './repeat-utilities';\r\nimport {viewsRequireLifecycle} from './analyze-view-factory';\r\nimport {AbstractRepeater} from './abstract-repeater';\r\n\r\nconst matcherExtractionMarker = '__marker_extracted__';\r\n\r\n/**\r\n * Binding to iterate over iterable objects (Array, Map and Number) to genereate a template for each iteration.\r\n */\r\n@customAttribute('repeat')\r\n@templateController\r\n@inject(BoundViewFactory, TargetInstruction, ViewSlot, ViewResources, ObserverLocator, RepeatStrategyLocator)\r\nexport class Repeat extends AbstractRepeater {\r\n\r\n  /**\r\n   * Setting this to `true` to enable legacy behavior, where a repeat would take first `matcher` binding\r\n   * any where inside its view if there's no `matcher` binding on the repeated element itself.\r\n   *\r\n   * Default value is true to avoid breaking change\r\n   * @default true\r\n   */\r\n  static useInnerMatcher = true;\r\n\r\n  /**\r\n   * List of items to bind the repeater to.\r\n   *\r\n   * @property items\r\n   */\r\n  @bindable items;\r\n  /**\r\n   * Local variable which gets assigned on each iteration.\r\n   *\r\n   * @property local\r\n   */\r\n  @bindable local;\r\n  /**\r\n   * Key when iterating over Maps.\r\n   *\r\n   * @property key\r\n   */\r\n  @bindable key;\r\n  /**\r\n   * Value when iterating over Maps.\r\n   *\r\n   * @property value\r\n   */\r\n  @bindable value;\r\n\r\n  /**@internal*/\r\n  viewFactory: any;\r\n  /**@internal*/\r\n  instruction: any;\r\n  /**@internal*/\r\n  viewSlot: any;\r\n  /**@internal*/\r\n  lookupFunctions: any;\r\n  /**@internal*/\r\n  observerLocator: any;\r\n  /**@internal*/\r\n  strategyLocator: any;\r\n  /**@internal*/\r\n  ignoreMutation: boolean;\r\n  /**@internal*/\r\n  sourceExpression: any;\r\n  /**@internal*/\r\n  isOneTime: any;\r\n  /**@internal*/\r\n  viewsRequireLifecycle: any;\r\n  /**@internal*/\r\n  scope: { bindingContext: any; overrideContext: any; };\r\n  /**@internal*/\r\n  matcherBinding: any;\r\n  /**@internal*/\r\n  collectionObserver: any;\r\n  /**@internal*/\r\n  strategy: any;\r\n  /**@internal */\r\n  callContext: 'handleCollectionMutated' | 'handleInnerCollectionMutated';\r\n\r\n  /**\r\n * Creates an instance of Repeat.\r\n * @param viewFactory The factory generating the view\r\n * @param instruction The instructions for how the element should be enhanced.\r\n * @param viewResources Collection of resources used to compile the the views.\r\n * @param viewSlot The slot the view is injected in to.\r\n * @param observerLocator The observer locator instance.\r\n * @param collectionStrategyLocator The strategy locator to locate best strategy to iterate the collection.\r\n */\r\n  constructor(viewFactory, instruction, viewSlot, viewResources, observerLocator, strategyLocator) {\r\n    super({\r\n      local: 'item',\r\n      viewsRequireLifecycle: viewsRequireLifecycle(viewFactory)\r\n    });\r\n\r\n    this.viewFactory = viewFactory;\r\n    this.instruction = instruction;\r\n    this.viewSlot = viewSlot;\r\n    this.lookupFunctions = viewResources.lookupFunctions;\r\n    this.observerLocator = observerLocator;\r\n    this.key = 'key';\r\n    this.value = 'value';\r\n    this.strategyLocator = strategyLocator;\r\n    this.ignoreMutation = false;\r\n    this.sourceExpression = getItemsSourceExpression(this.instruction, 'repeat.for');\r\n    this.isOneTime = isOneTime(this.sourceExpression);\r\n    this.viewsRequireLifecycle = viewsRequireLifecycle(viewFactory);\r\n  }\r\n\r\n  call(context, changes) {\r\n    this[context](this.items, changes);\r\n  }\r\n\r\n  /**\r\n  * Binds the repeat to the binding context and override context.\r\n  * @param bindingContext The binding context.\r\n  * @param overrideContext An override context for binding.\r\n  */\r\n  bind(bindingContext, overrideContext) {\r\n    this.scope = { bindingContext, overrideContext };\r\n    const instruction = this.instruction;\r\n    if (!(matcherExtractionMarker in instruction)) {\r\n      instruction[matcherExtractionMarker] = this._captureAndRemoveMatcherBinding();\r\n    }\r\n    this.matcherBinding = instruction[matcherExtractionMarker];\r\n    this.itemsChanged();\r\n  }\r\n\r\n  /**\r\n  * Unbinds the repeat\r\n  */\r\n  unbind() {\r\n    this.scope = null;\r\n    this.items = null;\r\n    this.matcherBinding = null;\r\n    this.viewSlot.removeAll(true, true);\r\n    this._unsubscribeCollection();\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _unsubscribeCollection() {\r\n    if (this.collectionObserver) {\r\n      this.collectionObserver.unsubscribe(this.callContext, this);\r\n      this.collectionObserver = null;\r\n      this.callContext = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Invoked everytime the item property changes.\r\n  */\r\n  itemsChanged() {\r\n    this._unsubscribeCollection();\r\n\r\n    // still bound?\r\n    if (!this.scope) {\r\n      return;\r\n    }\r\n\r\n    let items = this.items;\r\n    this.strategy = this.strategyLocator.getStrategy(items);\r\n    if (!this.strategy) {\r\n      throw new Error(`Value for '${this.sourceExpression}' is non-repeatable`);\r\n    }\r\n\r\n    if (!this.isOneTime && !this._observeInnerCollection()) {\r\n      this._observeCollection();\r\n    }\r\n    this.ignoreMutation = true;\r\n    this.strategy.instanceChanged(this, items);\r\n    this.observerLocator.taskQueue.queueMicroTask(() => {\r\n      this.ignoreMutation = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getInnerCollection() {\r\n    let expression = unwrapExpression(this.sourceExpression);\r\n    if (!expression) {\r\n      return null;\r\n    }\r\n    return expression.evaluate(this.scope, null);\r\n  }\r\n\r\n  /**\r\n  * Invoked when the underlying collection changes.\r\n  */\r\n  handleCollectionMutated(collection, changes) {\r\n    if (!this.collectionObserver) {\r\n      return;\r\n    }\r\n    if (this.ignoreMutation) {\r\n      return;\r\n    }\r\n    this.strategy.instanceMutated(this, collection, changes);\r\n  }\r\n\r\n  /**\r\n  * Invoked when the underlying inner collection changes.\r\n  */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  handleInnerCollectionMutated(collection, changes) {\r\n    if (!this.collectionObserver) {\r\n      return;\r\n    }\r\n    // guard against source expressions that have observable side-effects that could\r\n    // cause an infinite loop- eg a value converter that mutates the source array.\r\n    if (this.ignoreMutation) {\r\n      return;\r\n    }\r\n    this.ignoreMutation = true;\r\n    let newItems = this.sourceExpression.evaluate(this.scope, this.lookupFunctions);\r\n    this.observerLocator.taskQueue.queueMicroTask(() => this.ignoreMutation = false);\r\n\r\n    // call itemsChanged...\r\n    if (newItems === this.items) {\r\n      // call itemsChanged directly.\r\n      this.itemsChanged();\r\n    } else {\r\n      // call itemsChanged indirectly by assigning the new collection value to\r\n      // the items property, which will trigger the self-subscriber to call itemsChanged.\r\n      this.items = newItems;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _observeInnerCollection() {\r\n    let items = this._getInnerCollection();\r\n    let strategy = this.strategyLocator.getStrategy(items);\r\n    if (!strategy) {\r\n      return false;\r\n    }\r\n    this.collectionObserver = strategy.getCollectionObserver(this.observerLocator, items);\r\n    if (!this.collectionObserver) {\r\n      return false;\r\n    }\r\n    this.callContext = 'handleInnerCollectionMutated';\r\n    this.collectionObserver.subscribe(this.callContext, this);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _observeCollection() {\r\n    let items = this.items;\r\n    this.collectionObserver = this.strategy.getCollectionObserver(this.observerLocator, items);\r\n    if (this.collectionObserver) {\r\n      this.callContext = 'handleCollectionMutated';\r\n      this.collectionObserver.subscribe(this.callContext, this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Capture and remove matcher binding is a way to cache matcher binding + reduce redundant work\r\n   * caused by multiple unnecessary matcher bindings\r\n   * @internal\r\n   */\r\n  _captureAndRemoveMatcherBinding() {\r\n    const viewFactory: ViewFactory = this.viewFactory.viewFactory;\r\n    if (viewFactory) {\r\n      const template = viewFactory.template;\r\n      const instructions = viewFactory.instructions as Record<string, TargetInstruction>;\r\n      // legacy behavior enabled when Repeat.useInnerMathcer === true\r\n      if (Repeat.useInnerMatcher) {\r\n        return extractMatcherBindingExpression(instructions);\r\n      }\r\n      // if the template has more than 1 immediate child element\r\n      // it's a repeat put on a <template/> element\r\n      // not valid for matcher binding\r\n      if (getChildrenCount(template) > 1) {\r\n        return undefined;\r\n      }\r\n      // if the root element does not have any instruction\r\n      // it means there's no matcher binding\r\n      // no need to do any further work\r\n      const repeatedElement = getFirstElementChild(template);\r\n      if (!repeatedElement.hasAttribute('au-target-id')) {\r\n        return undefined;\r\n      }\r\n      const repeatedElementTargetId = repeatedElement.getAttribute('au-target-id');\r\n      return extractMatcherBindingExpression(instructions, repeatedElementTargetId);\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  // @override AbstractRepeater\r\n  viewCount() { return this.viewSlot.children.length; }\r\n  views() { return this.viewSlot.children; }\r\n  view(index) { return this.viewSlot.children[index]; }\r\n  matcher() {\r\n    const matcherBinding = this.matcherBinding;\r\n    return matcherBinding\r\n      ? matcherBinding.sourceExpression.evaluate(this.scope, matcherBinding.lookupFunctions)\r\n      : null;\r\n  }\r\n\r\n  addView(bindingContext, overrideContext) {\r\n    let view = this.viewFactory.create();\r\n    view.bind(bindingContext, overrideContext);\r\n    this.viewSlot.add(view);\r\n  }\r\n\r\n  insertView(index, bindingContext, overrideContext) {\r\n    let view = this.viewFactory.create();\r\n    view.bind(bindingContext, overrideContext);\r\n    this.viewSlot.insert(index, view);\r\n  }\r\n\r\n  moveView(sourceIndex, targetIndex) {\r\n    this.viewSlot.move(sourceIndex, targetIndex);\r\n  }\r\n\r\n  removeAllViews(returnToCache, skipAnimation) {\r\n    return this.viewSlot.removeAll(returnToCache, skipAnimation);\r\n  }\r\n\r\n  removeViews(viewsToRemove, returnToCache, skipAnimation) {\r\n    return this.viewSlot.removeMany(viewsToRemove, returnToCache, skipAnimation);\r\n  }\r\n\r\n  removeView(index, returnToCache, skipAnimation) {\r\n    return this.viewSlot.removeAt(index, returnToCache, skipAnimation);\r\n  }\r\n\r\n  updateBindings(view: View) {\r\n    const $view = view as View & { bindings: any[]; controllers: any[] };\r\n    let j = $view.bindings.length;\r\n    while (j--) {\r\n      updateOneTimeBinding($view.bindings[j]);\r\n    }\r\n    j = $view.controllers.length;\r\n    while (j--) {\r\n      let k = $view.controllers[j].boundProperties.length;\r\n      while (k--) {\r\n        let binding = $view.controllers[j].boundProperties[k].binding;\r\n        updateOneTimeBinding(binding);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Iterate a record of TargetInstruction and their expressions to find first binding expression that targets property named \"matcher\"\r\n */\r\nconst extractMatcherBindingExpression = (instructions: Record<string, TargetInstruction>, targetedElementId?: string): BindingExpression | undefined => {\r\n  const instructionIds = Object.keys(instructions);\r\n  for (let i = 0; i < instructionIds.length; i++) {\r\n    const instructionId = instructionIds[i];\r\n    // matcher binding can only works when root element is not a <template/>\r\n    // checking first el child\r\n    if (targetedElementId !== undefined && instructionId !== targetedElementId) {\r\n      continue;\r\n    }\r\n    const expressions = instructions[instructionId].expressions as BindingExpression[];\r\n    if (expressions) {\r\n      for (let ii = 0; ii < expressions.length; ii++) {\r\n        if (expressions[ii].targetProperty === 'matcher') {\r\n          const matcherBindingExpression = expressions[ii];\r\n          expressions.splice(ii, 1);\r\n          return matcherBindingExpression;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Calculate the number of child elements of an element\r\n *\r\n * Note: API .childElementCount/.children are not available in IE11\r\n */\r\nconst getChildrenCount = (el: Element | DocumentFragment) => {\r\n  const childNodes = el.childNodes;\r\n  let count = 0;\r\n  for (let i = 0, ii = childNodes.length; ii > i; ++i) {\r\n    if (childNodes[i].nodeType === /* element */1) {\r\n      ++count;\r\n    }\r\n  }\r\n  return count;\r\n};\r\n\r\n/**\r\n * Get the first child element of an element / doc fragment\r\n *\r\n * Note: API .firstElementChild is not available in IE11\r\n */\r\nconst getFirstElementChild = (el: Element | DocumentFragment) => {\r\n  let firstChild = el.firstChild as Element;\r\n  while (firstChild !== null) {\r\n    if (firstChild.nodeType === /* element */1) {\r\n      return firstChild;\r\n    }\r\n    firstChild = firstChild.nextSibling as Element;\r\n  }\r\n  return null;\r\n};\r\n","import {FEATURE, DOM} from 'aurelia-pal';\r\n\r\nexport const aureliaHideClassName = 'aurelia-hide';\r\n\r\nconst aureliaHideClass = `.${aureliaHideClassName} { display:none !important; }`;\r\n\r\nexport function injectAureliaHideStyleAtHead() {\r\n  DOM.injectStyles(aureliaHideClass);\r\n}\r\n\r\nexport function injectAureliaHideStyleAtBoundary(domBoundary: any) {\r\n  if (FEATURE.shadowDOM && domBoundary && !domBoundary.hasAureliaHideStyle) {\r\n    domBoundary.hasAureliaHideStyle = true;\r\n    DOM.injectStyles(aureliaHideClass, domBoundary);\r\n  }\r\n}\r\n","import {Optional} from 'aurelia-dependency-injection';\r\nimport {customAttribute, Animator} from 'aurelia-templating';\r\nimport {DOM} from 'aurelia-pal';\r\nimport {injectAureliaHideStyleAtBoundary, aureliaHideClassName} from './aurelia-hide-style';\r\n\r\n/**\r\n * Binding to conditionally show markup in the DOM based on the value.\r\n * - different from \"if\" in that the markup is still added to the DOM, simply not shown.\r\n */\r\n@customAttribute('show')\r\nexport class Show {\r\n\r\n  /**@internal*/\r\n  element: any;\r\n  /**@internal*/\r\n  animator: any;\r\n  /**@internal*/\r\n  domBoundary: any;\r\n\r\n  value: any;\r\n\r\n  /**@internal */\r\n  static inject() {\r\n    return [DOM.Element, Animator, Optional.of(DOM.boundary, true)];\r\n  }\r\n\r\n  /**\r\n   * Creates a new instance of Show.\r\n   * @param element Target element to conditionally show.\r\n   * @param animator The animator that conditionally adds or removes the aurelia-hide css class.\r\n   * @param domBoundary The DOM boundary. Used when the behavior appears within a component that utilizes the shadow DOM.\r\n   */\r\n  constructor(element, animator, domBoundary) {\r\n    this.element = element;\r\n    this.animator = animator;\r\n    this.domBoundary = domBoundary;\r\n  }\r\n\r\n  /**\r\n   * Invoked when the behavior is created.\r\n   */\r\n  created() {\r\n    injectAureliaHideStyleAtBoundary(this.domBoundary);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound value changes.\r\n   * @param newValue The new value.\r\n   */\r\n  valueChanged(newValue) {\r\n    let element = this.element;\r\n    let animator = this.animator;\r\n    if (newValue) {\r\n      animator.removeClass(element, aureliaHideClassName);\r\n    } else {\r\n      animator.addClass(element, aureliaHideClassName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Binds the Show attribute.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  bind(bindingContext) {\r\n    this.valueChanged(this.value);\r\n  }\r\n}\r\n","import {Optional} from 'aurelia-dependency-injection';\r\nimport {customAttribute, Animator} from 'aurelia-templating';\r\nimport {DOM} from 'aurelia-pal';\r\nimport {injectAureliaHideStyleAtBoundary, aureliaHideClassName} from './aurelia-hide-style';\r\n\r\n/**\r\n * Binding to conditionally show markup in the DOM based on the value.\r\n * - different from \"if\" in that the markup is still added to the DOM, simply not shown.\r\n */\r\n@customAttribute('hide')\r\nexport class Hide {\r\n  /**\r\n   * @internal\r\n   */\r\n  element: any;\r\n  /**\r\n   * @internal\r\n   */\r\n  animator: any;\r\n  /**\r\n   * @internal\r\n   */\r\n  domBoundary: any;\r\n\r\n  /**@internal */\r\n  static inject() {\r\n    return [DOM.Element, Animator, Optional.of(DOM.boundary, true)];\r\n  }\r\n\r\n  /**\r\n   * Creates a new instance of Hide.\r\n   * @param element Target element to conditionally hide.\r\n   * @param animator The animator that conditionally adds or removes the aurelia-hide css class.\r\n   * @param domBoundary The DOM boundary. Used when the behavior appears within a component that utilizes the shadow DOM.\r\n   */\r\n  constructor(element, animator, domBoundary) {\r\n    this.element = element;\r\n    this.animator = animator;\r\n    this.domBoundary = domBoundary;\r\n  }\r\n\r\n  /**\r\n   * Invoked when the behavior is created.\r\n   */\r\n  created() {\r\n    injectAureliaHideStyleAtBoundary(this.domBoundary);\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound value changes.\r\n   * @param newValue The new value.\r\n   */\r\n  valueChanged(newValue) {\r\n    if (newValue) {\r\n      this.animator.addClass(this.element, aureliaHideClassName);\r\n    } else {\r\n      this.animator.removeClass(this.element, aureliaHideClassName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Binds the Hide attribute.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  bind(bindingContext) {\r\n    this.valueChanged(this.value);\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  value(value: any) {\r\n    throw new Error('Method not implemented.');\r\n  }\r\n}\r\n","/**\r\n * Default Html Sanitizer to prevent script injection.\r\n */\r\nexport class HTMLSanitizer {\r\n  /**\r\n   * Sanitizes the provided input.\r\n   * @param input The input to be sanitized.\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  sanitize(input): any {\r\n    throw new Error(`To protect the application against a wide variety of sophisticated XSS attacks.\r\nPlease see https://aurelia.io/docs/binding/basics#element-content for instructions on how to use a secure solution like DOMPurify or sanitize-html.`);\r\n  }\r\n}\r\n","import { valueConverter } from 'aurelia-binding';\r\nimport { inject } from 'aurelia-dependency-injection';\r\nimport { HTMLSanitizer } from './html-sanitizer';\r\n\r\n/**\r\n * Simple html sanitization converter to preserve whitelisted elements and attributes on a bound property containing html.\r\n */\r\n@valueConverter('sanitizeHTML')\r\n@inject(HTMLSanitizer)\r\nexport class SanitizeHTMLValueConverter {\r\n  /**@internal */\r\n  sanitizer: HTMLSanitizer;\r\n  /**\r\n   * Creates an instanse of the value converter.\r\n   * @param sanitizer The html sanitizer.\r\n   */\r\n  constructor(sanitizer: HTMLSanitizer) {\r\n    this.sanitizer = sanitizer;\r\n  }\r\n\r\n  /**\r\n   * Process the provided markup that flows to the view.\r\n   * @param untrustedMarkup The untrusted markup to be sanitized.\r\n   */\r\n  toView(untrustedMarkup) {\r\n    if (untrustedMarkup === null || untrustedMarkup === undefined) {\r\n      return null;\r\n    }\r\n\r\n    return this.sanitizer.sanitize(untrustedMarkup);\r\n  }\r\n}\r\n","import {inject} from 'aurelia-dependency-injection';\r\nimport {BoundViewFactory, ViewSlot, customAttribute, templateController, ViewFactory, View} from 'aurelia-templating';\r\n\r\n/**\r\n * Marks any part of a view to be replacable by the consumer.\r\n */\r\n@customAttribute('replaceable')\r\n@templateController\r\n@inject(BoundViewFactory, ViewSlot)\r\nexport class Replaceable {\r\n\r\n  /**@internal*/\r\n  viewFactory: ViewFactory;\r\n  /**@internal*/\r\n  viewSlot: ViewSlot;\r\n  /**@internal*/\r\n  view: View;\r\n\r\n  /**\r\n   * @param viewFactory target The factory generating the view.\r\n   * @param viewSlot viewSlot The slot the view is injected in to.\r\n   */\r\n  constructor(viewFactory: ViewFactory, viewSlot: ViewSlot) {\r\n    this.viewFactory = viewFactory; // This is referenced internally in the Controller's bind method.\r\n    this.viewSlot = viewSlot;\r\n    this.view = null;\r\n  }\r\n\r\n  /**\r\n   * Binds the replaceable to the binding context and override context.\r\n   * @param bindingContext The binding context.\r\n   * @param overrideContext An override context for binding.\r\n   */\r\n  bind(bindingContext, overrideContext) {\r\n    if (this.view === null) {\r\n      this.view = (this.viewFactory as any).create();\r\n      this.viewSlot.add(this.view);\r\n    }\r\n\r\n    this.view.bind(bindingContext, overrideContext);\r\n  }\r\n\r\n  /**\r\n   * Unbinds the replaceable.\r\n   */\r\n  unbind() {\r\n    this.view.unbind();\r\n  }\r\n}\r\n","import {customAttribute} from 'aurelia-templating';\r\nimport {bindingMode} from 'aurelia-binding';\r\nimport {TaskQueue} from 'aurelia-task-queue';\r\nimport {DOM} from 'aurelia-pal';\r\n\r\n/**\r\n * CustomAttribute that binds provided DOM element's focus attribute with a property on the viewmodel.\r\n */\r\n@customAttribute('focus', bindingMode.twoWay)\r\nexport class Focus {\r\n  /**\r\n   *@internal\r\n   */\r\n  element: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  taskQueue: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  isAttached: boolean;\r\n  /**\r\n   *@internal\r\n   */\r\n  needsApply: boolean;\r\n  /**\r\n   *@internal\r\n   */\r\n  value: any;\r\n\r\n  /**@internal */\r\n  static inject() {\r\n    return [DOM.Element, TaskQueue];\r\n  }\r\n  /**\r\n   * Creates an instance of Focus.\r\n   * @paramelement Target element on where attribute is placed on.\r\n   * @param taskQueue The TaskQueue instance.\r\n   */\r\n  constructor(element, taskQueue) {\r\n    this.element = element;\r\n    this.taskQueue = taskQueue;\r\n    this.isAttached = false;\r\n    this.needsApply = false;\r\n  }\r\n\r\n  /**\r\n   * Invoked everytime the bound value changes.\r\n   */\r\n  valueChanged() {\r\n    if (this.isAttached) {\r\n      this._apply();\r\n    } else {\r\n      this.needsApply = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _apply() {\r\n    if (this.value) {\r\n      this.taskQueue.queueMicroTask(() => {\r\n        if (this.value) {\r\n          this.element.focus();\r\n        }\r\n      });\r\n    } else {\r\n      this.element.blur();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Invoked when the attribute is attached to the DOM.\r\n   */\r\n  attached() {\r\n    this.isAttached = true;\r\n    if (this.needsApply) {\r\n      this.needsApply = false;\r\n      this._apply();\r\n    }\r\n    this.element.addEventListener('focus', this);\r\n    this.element.addEventListener('blur', this);\r\n  }\r\n\r\n  /**\r\n   * Invoked when the attribute is detached from the DOM.\r\n   */\r\n  detached() {\r\n    this.isAttached = false;\r\n    this.element.removeEventListener('focus', this);\r\n    this.element.removeEventListener('blur', this);\r\n  }\r\n\r\n  handleEvent(e) {\r\n    if (e.type === 'focus') {\r\n      this.value = true;\r\n    } else if (DOM.activeElement !== this.element) {\r\n      this.value = false;\r\n    }\r\n  }\r\n}\r\n","/*eslint new-cap:0, padded-blocks:0*/\r\nimport {ViewResources, resource, ViewCompileInstruction} from 'aurelia-templating';\r\nimport {Loader} from 'aurelia-loader';\r\nimport {Container} from 'aurelia-dependency-injection';\r\nimport {relativeToFile} from 'aurelia-path';\r\nimport {DOM, FEATURE} from 'aurelia-pal';\r\n\r\nlet cssUrlMatcher = /url\\((?!['\"]data)([^)]+)\\)/gi;\r\n\r\nfunction fixupCSSUrls(address: string, css: string) {\r\n  if (typeof css !== 'string') {\r\n    throw new Error(`Failed loading required CSS file: ${address}`);\r\n  }\r\n  return css.replace(cssUrlMatcher, (match, p1) => {\r\n    let quote = p1.charAt(0);\r\n    if (quote === '\\'' || quote === '\"') {\r\n      p1 = p1.substr(1, p1.length - 2);\r\n    }\r\n    return 'url(\\'' + relativeToFile(p1, address) + '\\')';\r\n  });\r\n}\r\n\r\nclass CSSResource {\r\n  /**\r\n   *@internal\r\n   */\r\n  address: string;\r\n  /**\r\n   *@internal\r\n   */\r\n  _scoped: any;\r\n  /**\r\n   *@internal\r\n   */\r\n  _global: boolean;\r\n  /**\r\n   *@internal\r\n   */\r\n  _alreadyGloballyInjected: boolean;\r\n\r\n  constructor(address: string) {\r\n    this.address = address;\r\n    this._scoped = null;\r\n    this._global = false;\r\n    this._alreadyGloballyInjected = false;\r\n  }\r\n\r\n  initialize(container: Container, Target: Function): void {\r\n    this._scoped = new (Target as any)(this);\r\n  }\r\n\r\n  register(registry: ViewResources, name?: string): void {\r\n    if (name === 'scoped') {\r\n      registry.registerViewEngineHooks(this._scoped);\r\n    } else {\r\n      this._global = true;\r\n    }\r\n  }\r\n\r\n  load(container: Container): Promise<CSSResource> {\r\n    return container.get(Loader)\r\n      .loadText(this.address)\r\n      .catch(() => null)\r\n      .then(text => {\r\n        text = fixupCSSUrls(this.address, text);\r\n        this._scoped.css = text;\r\n        if (this._global) {\r\n          this._alreadyGloballyInjected = true;\r\n          DOM.injectStyles(text);\r\n        }\r\n        return this;\r\n      });\r\n  }\r\n}\r\n\r\nclass CSSViewEngineHooks {\r\n  owner: CSSResource;\r\n  css: any;\r\n  _global: boolean;\r\n  constructor(owner: CSSResource) {\r\n    this.owner = owner;\r\n    this.css = null;\r\n  }\r\n\r\n  beforeCompile(content: DocumentFragment, resources: ViewResources, instruction: ViewCompileInstruction): void {\r\n    if (instruction.targetShadowDOM) {\r\n      DOM.injectStyles(this.css, content as any, true);\r\n    } else if (FEATURE.scopedCSS) {\r\n      let styleNode = DOM.injectStyles(this.css, content as any, true) as Element;\r\n      styleNode.setAttribute('scoped', 'scoped');\r\n    } else if (this._global && !this.owner._alreadyGloballyInjected) {\r\n      DOM.injectStyles(this.css);\r\n      this.owner._alreadyGloballyInjected = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport function _createCSSResource(address: string): Function {\r\n  @resource(new CSSResource(address))\r\n  class ViewCSS extends CSSViewEngineHooks {}\r\n  return ViewCSS;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {DataAttributeObserver, bindingBehavior} from 'aurelia-binding';\r\n\r\n@bindingBehavior('attr')\r\nexport class AttrBindingBehavior {\r\n  bind(binding, source) {\r\n    binding.targetObserver = new DataAttributeObserver(binding.target, binding.targetProperty);\r\n  }\r\n\r\n  unbind(binding, source) {\r\n    // empty\r\n  }\r\n}\r\n","import { bindingBehavior, bindingMode } from 'aurelia-binding';\r\nimport { mixin } from 'aurelia-metadata';\r\n\r\nlet modeBindingBehavior = {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  bind(binding, source, lookupFunctions) {\r\n    binding.originalMode = binding.mode;\r\n    binding.mode = this.mode;\r\n  },\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  unbind(binding, source) {\r\n    binding.mode = binding.originalMode;\r\n    binding.originalMode = null;\r\n  }\r\n};\r\n\r\n@mixin(modeBindingBehavior)\r\n@bindingBehavior('oneTime')\r\nexport class OneTimeBindingBehavior {\r\n\r\n  mode: bindingMode;\r\n\r\n  constructor() {\r\n    this.mode = bindingMode.oneTime;\r\n  }\r\n}\r\n\r\n@mixin(modeBindingBehavior)\r\n@bindingBehavior('oneWay')\r\nexport class OneWayBindingBehavior {\r\n\r\n  mode: bindingMode;\r\n\r\n  constructor() {\r\n    this.mode = bindingMode.toView;\r\n  }\r\n}\r\n\r\n@mixin(modeBindingBehavior)\r\n@bindingBehavior('toView')\r\nexport class ToViewBindingBehavior {\r\n\r\n  mode: bindingMode;\r\n\r\n  constructor() {\r\n    this.mode = bindingMode.toView;\r\n  }\r\n}\r\n\r\n@mixin(modeBindingBehavior)\r\n@bindingBehavior('fromView')\r\nexport class FromViewBindingBehavior {\r\n\r\n  mode: bindingMode;\r\n\r\n  constructor() {\r\n    this.mode = bindingMode.fromView;\r\n  }\r\n}\r\n\r\n@mixin(modeBindingBehavior)\r\n@bindingBehavior('twoWay')\r\nexport class TwoWayBindingBehavior {\r\n\r\n  mode: bindingMode;\r\n\r\n  constructor() {\r\n    this.mode = bindingMode.twoWay;\r\n  }\r\n}\r\n","import {bindingMode, bindingBehavior} from 'aurelia-binding';\r\n\r\nfunction throttle(newValue) {\r\n  let state = this.throttleState;\r\n  let elapsed = +new Date() - state.last;\r\n  if (elapsed >= state.delay) {\r\n    clearTimeout(state.timeoutId);\r\n    state.timeoutId = null;\r\n    state.last = +new Date();\r\n    this.throttledMethod(newValue);\r\n    return;\r\n  }\r\n  state.newValue = newValue;\r\n  if (state.timeoutId === null) {\r\n    state.timeoutId = setTimeout(\r\n      () => {\r\n        state.timeoutId = null;\r\n        state.last = +new Date();\r\n        this.throttledMethod(state.newValue);\r\n      },\r\n      state.delay - elapsed);\r\n  }\r\n}\r\n\r\n@bindingBehavior('throttle')\r\nexport class ThrottleBindingBehavior {\r\n  bind(binding, source, delay = 200) {\r\n    // determine which method to throttle.\r\n    let methodToThrottle = 'updateTarget'; // one-way bindings or interpolation bindings\r\n    if (binding.callSource) {\r\n      methodToThrottle = 'callSource';     // listener and call bindings\r\n    } else if (binding.updateSource && binding.mode === bindingMode.twoWay) {\r\n      methodToThrottle = 'updateSource';   // two-way bindings\r\n    }\r\n\r\n    // stash the original method and it's name.\r\n    // note: a generic name like \"originalMethod\" is not used to avoid collisions\r\n    // with other binding behavior types.\r\n    binding.throttledMethod = binding[methodToThrottle];\r\n    binding.throttledMethod.originalName = methodToThrottle;\r\n\r\n    // replace the original method with the throttling version.\r\n    binding[methodToThrottle] = throttle;\r\n\r\n    // create the throttle state.\r\n    binding.throttleState = {\r\n      delay: delay,\r\n      last: 0,\r\n      timeoutId: null\r\n    };\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  unbind(binding, source) {\r\n    // restore the state of the binding.\r\n    let methodToRestore = binding.throttledMethod.originalName;\r\n    binding[methodToRestore] = binding.throttledMethod;\r\n    binding.throttledMethod = null;\r\n    clearTimeout(binding.throttleState.timeoutId);\r\n    binding.throttleState = null;\r\n  }\r\n}\r\n","import {\r\n  bindingMode,\r\n  sourceContext,\r\n  targetContext,\r\n  bindingBehavior\r\n} from 'aurelia-binding';\r\n\r\nconst unset = {};\r\n\r\nfunction debounceCallSource(event) {\r\n  const state = this.debounceState;\r\n  clearTimeout(state.timeoutId);\r\n  state.timeoutId = setTimeout(() => this.debouncedMethod(event), state.delay);\r\n}\r\n\r\nfunction debounceCall(context, newValue, oldValue) {\r\n  const state = this.debounceState;\r\n  clearTimeout(state.timeoutId);\r\n  if (context !== state.callContextToDebounce) {\r\n    state.oldValue = unset;\r\n    this.debouncedMethod(context, newValue, oldValue);\r\n    return;\r\n  }\r\n  if (state.oldValue === unset) {\r\n    state.oldValue = oldValue;\r\n  }\r\n  state.timeoutId = setTimeout(() => {\r\n    const _oldValue = state.oldValue;\r\n    state.oldValue = unset;\r\n    this.debouncedMethod(context, newValue, _oldValue);\r\n  }, state.delay);\r\n}\r\n\r\n@bindingBehavior('debounce')\r\nexport class DebounceBindingBehavior {\r\n  bind(binding, source, delay = 200) {\r\n    const isCallSource = binding.callSource !== undefined;\r\n    const methodToDebounce = isCallSource ? 'callSource' : 'call';\r\n    const debouncer = isCallSource ? debounceCallSource : debounceCall;\r\n    const mode = binding.mode;\r\n    const callContextToDebounce = mode === bindingMode.twoWay || mode === bindingMode.fromView ? targetContext : sourceContext;\r\n\r\n    // stash the original method and it's name.\r\n    // note: a generic name like \"originalMethod\" is not used to avoid collisions\r\n    // with other binding behavior types.\r\n    binding.debouncedMethod = binding[methodToDebounce];\r\n    binding.debouncedMethod.originalName = methodToDebounce;\r\n\r\n    // replace the original method with the debouncing version.\r\n    binding[methodToDebounce] = debouncer;\r\n\r\n    // create the debounce state.\r\n    binding.debounceState = {\r\n      callContextToDebounce,\r\n      delay,\r\n      timeoutId: 0,\r\n      oldValue: unset\r\n    };\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  unbind(binding, source) {\r\n    // restore the state of the binding.\r\n    const methodToRestore = binding.debouncedMethod.originalName;\r\n    binding[methodToRestore] = binding.debouncedMethod;\r\n    binding.debouncedMethod = null;\r\n    clearTimeout(binding.debounceState.timeoutId);\r\n    binding.debounceState = null;\r\n  }\r\n}\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport { bindingBehavior } from 'aurelia-binding';\r\n\r\nfunction findOriginalEventTarget(event) {\r\n  return (event.path && event.path[0]) || (event.deepPath && event.deepPath[0]) || event.target;\r\n}\r\n\r\nfunction handleSelfEvent(event) {\r\n  let target = findOriginalEventTarget(event);\r\n  if (this.target !== target) { return; }\r\n  this.selfEventCallSource(event);\r\n}\r\n\r\n@bindingBehavior('self')\r\nexport class SelfBindingBehavior {\r\n  bind(binding, source) {\r\n    if (!binding.callSource || !binding.targetEvent) {\r\n      throw new Error('Self binding behavior only supports event.');\r\n    }\r\n    binding.selfEventCallSource = binding.callSource;\r\n    binding.callSource = handleSelfEvent;\r\n  }\r\n\r\n  unbind(binding, source) {\r\n    binding.callSource = binding.selfEventCallSource;\r\n    binding.selfEventCallSource = null;\r\n  }\r\n}\r\n","import { sourceContext } from 'aurelia-binding';\r\n\r\nexport class BindingSignaler {\r\n  signals = {};\r\n\r\n  signal(name: string): void {\r\n    let bindings = this.signals[name];\r\n    if (!bindings) {\r\n      return;\r\n    }\r\n    let i = bindings.length;\r\n    while (i--) {\r\n      bindings[i].call(sourceContext);\r\n    }\r\n  }\r\n}\r\n","import {bindingBehavior} from 'aurelia-binding';\r\nimport {BindingSignaler} from './binding-signaler';\r\n\r\n@bindingBehavior('signal')\r\nexport class SignalBindingBehavior {\r\n\r\n  /**@internal */\r\n  static inject() { return [BindingSignaler]; }\r\n  signals;\r\n\r\n  constructor(bindingSignaler) {\r\n    this.signals = bindingSignaler.signals;\r\n  }\r\n\r\n  bind(binding, source, ...names) {\r\n    if (!binding.updateTarget) {\r\n      throw new Error('Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.');\r\n    }\r\n    let signals = this.signals;\r\n    if (names.length === 1) {\r\n      let name = names[0];\r\n      let bindings = signals[name] || (signals[name] = []);\r\n      bindings.push(binding);\r\n      binding.signalName = name;\r\n    } else if (names.length > 1) {\r\n      let i = names.length;\r\n      while (i--) {\r\n        let name = names[i];\r\n        let bindings = signals[name] || (signals[name] = []);\r\n        bindings.push(binding);\r\n      }\r\n      binding.signalName = names;\r\n    } else {\r\n      throw new Error('Signal name is required.');\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  unbind(binding, source) {\r\n    let signals = this.signals;\r\n    let name = binding.signalName;\r\n    binding.signalName = null;\r\n    if (Array.isArray(name)) {\r\n      let names = name;\r\n      let i = names.length;\r\n      while (i--) {\r\n        let n = names[i];\r\n        let bindings = signals[n];\r\n        bindings.splice(bindings.indexOf(binding), 1);\r\n      }\r\n    } else {\r\n      let bindings = signals[name];\r\n      bindings.splice(bindings.indexOf(binding), 1);\r\n    }\r\n  }\r\n}\r\n","import { bindingMode, EventSubscriber, bindingBehavior } from 'aurelia-binding';\r\n\r\n// tslint:disable-next-line:max-line-length\r\nconst eventNamesRequired = 'The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:\\'blur\\'\">';\r\nconst notApplicableMessage = 'The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.';\r\n\r\n@bindingBehavior('updateTrigger')\r\nexport class UpdateTriggerBindingBehavior {\r\n\r\n  bind(binding, source, ...events) {\r\n    if (events.length === 0) {\r\n      throw new Error(eventNamesRequired);\r\n    }\r\n    if (binding.mode !== bindingMode.twoWay && binding.mode !== bindingMode.fromView) {\r\n      throw new Error(notApplicableMessage);\r\n    }\r\n\r\n    // ensure the binding's target observer has been set.\r\n    let targetObserver = binding.observerLocator.getObserver(binding.target, binding.targetProperty);\r\n    if (!targetObserver.handler) {\r\n      throw new Error(notApplicableMessage);\r\n    }\r\n    binding.targetObserver = targetObserver;\r\n\r\n    // stash the original element subscribe function.\r\n    targetObserver.originalHandler = binding.targetObserver.handler;\r\n\r\n    // replace the element subscribe function with one that uses the correct events.\r\n    let handler = new EventSubscriber(events);\r\n    targetObserver.handler = handler;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  unbind(binding, source) {\r\n    let targetObserver = binding.targetObserver;\r\n    // restore the state of the binding.\r\n    targetObserver.handler.dispose();\r\n    targetObserver.handler = targetObserver.originalHandler;\r\n    targetObserver.originalHandler = null;\r\n  }\r\n}\r\n","/*eslint padded-blocks:0*/\r\nimport {useView, customElement, bindable, useShadowDOM} from 'aurelia-templating';\r\nimport { getLogger } from 'aurelia-logging';\r\n\r\nexport function _createDynamicElement({ name, viewUrl, bindableNames, useShadowDOMmode }: {\r\n  name: string,\r\n  viewUrl: string,\r\n  bindableNames: string[],\r\n  useShadowDOMmode: null | '' | 'open' | 'closed'\r\n}): Function {\r\n  @customElement(name)\r\n  @useView(viewUrl)\r\n  class DynamicElement {\r\n    $parent: any;\r\n    bind(bindingContext) {\r\n      this.$parent = bindingContext;\r\n    }\r\n  }\r\n\r\n  for (let i = 0, ii = bindableNames.length; i < ii; ++i) {\r\n    bindable(bindableNames[i])(DynamicElement);\r\n  }\r\n\r\n  switch (useShadowDOMmode) {\r\n  case 'open':\r\n    useShadowDOM({ mode: 'open' })(DynamicElement);\r\n    break;\r\n\r\n  case 'closed':\r\n    useShadowDOM({ mode: 'closed' })(DynamicElement);\r\n    break;\r\n\r\n  case '':\r\n    useShadowDOM(DynamicElement);\r\n    break;\r\n\r\n  case null:\r\n    // Do not use shadow dom\r\n    break;\r\n\r\n  default:\r\n    getLogger('aurelia-html-only-element')\r\n      .warn(`Expected 'use-shadow-dom' value to be \"close\", \"open\" or \"\", received ${useShadowDOMmode}`);\r\n    break;\r\n  }\r\n\r\n  return DynamicElement;\r\n}\r\n","import {ViewEngine} from 'aurelia-templating';\r\nimport {_createDynamicElement} from './dynamic-element';\r\n\r\nexport function getElementName(address) {\r\n  return /([^\\/^\\?]+)\\.html/i.exec(address)[1].toLowerCase();\r\n}\r\n\r\nexport function configure(config) {\r\n  const viewEngine = config.container.get(ViewEngine);\r\n  const loader = config.aurelia.loader;\r\n\r\n  viewEngine.addResourcePlugin('.html', {\r\n    'fetch': function(viewUrl) {\r\n      return loader.loadTemplate(viewUrl).then(registryEntry => {\r\n        let bindableNames = registryEntry.template.getAttribute('bindable');\r\n        const useShadowDOMmode: null | '' | 'open' | 'closed' = registryEntry.template.getAttribute('use-shadow-dom');\r\n        const name = getElementName(viewUrl);\r\n\r\n        if (bindableNames) {\r\n          bindableNames = bindableNames.split(',').map(x => x.trim());\r\n          registryEntry.template.removeAttribute('bindable');\r\n        } else {\r\n          bindableNames = [];\r\n        }\r\n\r\n        return { [name]: _createDynamicElement({name, viewUrl, bindableNames, useShadowDOMmode}) };\r\n      });\r\n    }\r\n  });\r\n}\r\n","import {Compose} from './compose';\r\nimport {If} from './if';\r\nimport {Else} from './else';\r\nimport {With} from './with';\r\nimport {Repeat} from './repeat';\r\nimport {Show} from './show';\r\nimport {Hide} from './hide';\r\nimport {SanitizeHTMLValueConverter} from './sanitize-html';\r\nimport {Replaceable} from './replaceable';\r\nimport {Focus} from './focus';\r\nimport {ViewEngine} from 'aurelia-templating';\r\nimport {_createCSSResource} from './css-resource';\r\nimport {HTMLSanitizer} from './html-sanitizer';\r\nimport {AttrBindingBehavior} from './attr-binding-behavior';\r\nimport {OneTimeBindingBehavior, OneWayBindingBehavior, TwoWayBindingBehavior, FromViewBindingBehavior, ToViewBindingBehavior} from './binding-mode-behaviors';\r\nimport {ThrottleBindingBehavior} from './throttle-binding-behavior';\r\nimport {DebounceBindingBehavior} from './debounce-binding-behavior';\r\nimport {SelfBindingBehavior} from './self-binding-behavior';\r\nimport {SignalBindingBehavior} from './signal-binding-behavior';\r\nimport {BindingSignaler} from './binding-signaler';\r\nimport {UpdateTriggerBindingBehavior} from './update-trigger-binding-behavior';\r\nimport {AbstractRepeater} from './abstract-repeater';\r\nimport {RepeatStrategyLocator} from './repeat-strategy-locator';\r\nimport {configure as configureHtmlResourcePlugin} from './html-resource-plugin';\r\nimport {NullRepeatStrategy} from './null-repeat-strategy';\r\nimport {ArrayRepeatStrategy} from './array-repeat-strategy';\r\nimport {MapRepeatStrategy} from './map-repeat-strategy';\r\nimport {SetRepeatStrategy} from './set-repeat-strategy';\r\nimport {NumberRepeatStrategy} from './number-repeat-strategy';\r\nimport {\r\n  createFullOverrideContext,\r\n  updateOverrideContext,\r\n  getItemsSourceExpression,\r\n  isOneTime,\r\n  updateOneTimeBinding,\r\n  unwrapExpression\r\n} from './repeat-utilities';\r\nimport {viewsRequireLifecycle} from './analyze-view-factory';\r\nimport {injectAureliaHideStyleAtHead} from './aurelia-hide-style';\r\nimport './interfaces';\r\n\r\nfunction configure(config: any) {\r\n  injectAureliaHideStyleAtHead();\r\n\r\n  config.globalResources(\r\n    Compose,\r\n    If,\r\n    Else,\r\n    With,\r\n    Repeat,\r\n    Show,\r\n    Hide,\r\n    Replaceable,\r\n    Focus,\r\n    SanitizeHTMLValueConverter,\r\n    OneTimeBindingBehavior,\r\n    OneWayBindingBehavior,\r\n    ToViewBindingBehavior,\r\n    FromViewBindingBehavior,\r\n    TwoWayBindingBehavior,\r\n    ThrottleBindingBehavior,\r\n    DebounceBindingBehavior,\r\n    SelfBindingBehavior,\r\n    SignalBindingBehavior,\r\n    UpdateTriggerBindingBehavior,\r\n    AttrBindingBehavior\r\n  );\r\n\r\n  configureHtmlResourcePlugin(config);\r\n\r\n  let viewEngine = config.container.get(ViewEngine);\r\n  let styleResourcePlugin = {\r\n    fetch(address) {\r\n      return { [address]: _createCSSResource(address) };\r\n    }\r\n  };\r\n  ['.css', '.less', '.sass', '.scss', '.styl'].forEach(ext => viewEngine.addResourcePlugin(ext, styleResourcePlugin));\r\n}\r\n\r\nexport {\r\n  Compose,\r\n  If,\r\n  Else,\r\n  With,\r\n  Repeat,\r\n  Show,\r\n  Hide,\r\n  HTMLSanitizer,\r\n  SanitizeHTMLValueConverter,\r\n  Replaceable,\r\n  Focus,\r\n  configure,\r\n  AttrBindingBehavior,\r\n  OneTimeBindingBehavior,\r\n  OneWayBindingBehavior,\r\n  ToViewBindingBehavior,\r\n  FromViewBindingBehavior,\r\n  TwoWayBindingBehavior,\r\n  ThrottleBindingBehavior,\r\n  DebounceBindingBehavior,\r\n  SelfBindingBehavior,\r\n  SignalBindingBehavior,\r\n  BindingSignaler,\r\n  UpdateTriggerBindingBehavior,\r\n  AbstractRepeater,\r\n  RepeatStrategyLocator,\r\n  NullRepeatStrategy,\r\n  ArrayRepeatStrategy,\r\n  MapRepeatStrategy,\r\n  SetRepeatStrategy,\r\n  NumberRepeatStrategy,\r\n  createFullOverrideContext,\r\n  updateOverrideContext,\r\n  getItemsSourceExpression,\r\n  isOneTime,\r\n  updateOneTimeBinding,\r\n  unwrapExpression,\r\n  viewsRequireLifecycle\r\n};\r\n"],"names":["DOM","Container","CompositionEngine","ViewSlot","ViewResources","TaskQueue","bindable","noView","customElement","customAttribute","templateController","inject","BoundViewFactory","createOverrideContext","bindingMode","BindingBehavior","ValueConverter","sourceContext","mergeSplice","TargetInstruction","ObserverLocator","FEATURE","Animator","Optional","valueConverter","relativeToFile","Loader","resource","DataAttributeObserver","bindingBehavior","mixin","targetContext","EventSubscriber","useView","useShadowDOM","getLogger","configure","ViewEngine","configureHtmlResourcePlugin"],"mappings":"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"}